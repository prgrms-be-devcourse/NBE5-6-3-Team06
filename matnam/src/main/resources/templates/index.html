<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëª¨ì„ ì„œë¹„ìŠ¤</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script th:src="@{/js/common-toast.js}"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/header.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Noto Sans KR', sans-serif;
        }
        body {
            background-color: #fff;
            color: #333;
        }
        section {
            margin: 0 auto 4rem auto;
            max-width: 1200px;
            padding: 0 1rem;
        }
        #header-anonymous, #header-login {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            border-bottom: 1px solid #eee;
        }
        .logo {
            font-weight: bold;
            font-size: 1.5rem;
        }
        nav {
            display: flex;
            gap: 1.5rem;
        }
        nav a {
            text-decoration: none;
            color: #333;
        }
        .header-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            border: none;
        }
        .btn-primary {
            background-color: #000;
            color: white;
        }
        .btn-outline {
            background-color: white;
            border: 1px solid #ddd;
        }
        .main-banner {
            padding: 2rem;
            background-color: #fff;
        }
        .main-banner h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }
        .main-banner p {
            color: #666;
            margin-bottom: 1.5rem;
        }
        .banner-buttons {
            display: flex;
            gap: 0.5rem;
        }
        .search-section {
            padding: 2rem;
            text-align: center;
            background-color: #fff;
        }
        .search-section h2 {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
        }
        .search-section p {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        .search-button {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        .meetings-section {
            padding: 2rem;
        }
        .meetings-section h2 {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
        }
        .meetings-section p {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        .meetings-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }
        .meeting-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
        }
        .meeting-image {
            height: 150px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .meeting-details {
            padding: 1rem;
        }
        .meeting-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .meeting-date, .meeting-location {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 0.5rem;
        }
        .link-button {
            display: inline-block;
            margin-top: 0.75rem;
            padding: 0.4rem 0.8rem;
            background-color: #a7a7d1;
            color: #fff;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: background-color 0.2s ease;
        }

        .link-button:hover{
            background-color: #5b5b9f;
        }
        .features-section {
            padding: 2rem;
            background-color: #f9f9f9;
        }
        .features-section h2 {
            font-size: 1.4rem;
            text-align: center;
            margin-bottom: 2rem;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }
        .feature {
            text-align: center;
        }
        .feature h3 {
            margin: 1rem 0 0.5rem;
            font-size: 1.1rem;
        }
        .feature p {
            color: #666;
            font-size: 0.9rem;
        }
        footer {
            text-align: center;
            padding: 1rem 2rem;
            font-size: 0.8rem;
            color: #999;
            border-top: 1px solid #eee;
            background-color: #fff;
        }
        .ranking-section {
            padding: 2rem;
            background-color: #fff;
            margin-bottom: 2rem;
        }
        .ranking-section h2 {
            font-size: 1.4rem;
            text-align: center;
            margin-bottom: 1.5rem;
            font-weight: bold;
        }
        .ranking-section p {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }
        .ranking-list {
            max-width: 800px;
            margin: 0 auto;
        }
        .ranking-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            background-color: #fcfcfc;
            transition: transform 0.2s ease;
        }
        .ranking-item:hover {
            transform: translateY(-3px);
        }
        .ranking-number {
            font-size: 2rem;
            font-weight: bold;
            color: #000;
            margin-right: 1.5rem;
            min-width: 2rem;
            text-align: center;
        }
        .ranking-content {
            flex: 1;
        }
        .item-name {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        .item-description {
            color: #666;
            font-size: 0.9rem;
        }
        .coupon-section {
            padding: 2rem;
            background-color: #fff;
            margin-bottom: 2rem;
        }

        .coupon-section h2 {
            font-size: 1.4rem;
            text-align: center;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .coupon-section p {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }

        .coupons-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .coupon-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            background-color: #fcfcfc;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease;
        }

        .coupon-card:hover {
            transform: translateY(-3px);
        }

        .coupon-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .restaurant-name {
            font-weight: bold;
            font-size: 0.9rem;
        }

        .discount-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.3rem 0.6rem;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .coupon-body {
            padding: 1rem;
            text-align: center;
        }

        .coupon-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .coupon-progress {
            color: #666;
            font-size: 0.8rem;
        }

        .coupon-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ - ê¸°ì¡´ íŒ¨í„´ê³¼ ë™ì¼ */
        @media (max-width: 768px) {
            .coupons-grid {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .coupon-actions {
                flex-direction: column;
                align-items: center;
            }

            .coupon-actions .btn {
                width: 200px;
            }
        }

        .no-coupons {
            text-align: center;
            color: #999;
            font-style: italic;
            margin: 2rem 0;
        }
    </style>
    <link rel="stylesheet" th:href="@{/css/notification.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<header th:replace="~{fragments/header :: siteHeader}"></header>

<message>
    <div id="messageBox" style="display: none;
                           background-color: #4CAF50;
                           color: white;
                           text-align: center;
                           padding: 15px;
                           margin-bottom: 20px;
                           border-radius: 4px;">
        íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
    </div>
</message>

<!-- ë©”ì¸ ë°°ë„ˆ -->
<section class="main-banner" style="display: flex; align-items: center; justify-content: space-between;">
    <div style="max-width: 50%;">
        <h1 style="font-size: 2.5rem; font-weight: bold; margin-bottom: 1rem;">ë§›ìˆëŠ” ì‹ì‚¬ì™€ ìƒˆë¡œìš´ ë§Œë‚¨</h1>
        <p style="color: #666; margin-bottom: 1.5rem;">ë§›ë‚¨ì—ì„œ ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ë§›ìˆëŠ” ì‹ì‚¬ë¥¼ ì¦ê¸°ì„¸ìš”.
            ìƒˆë¡œìš´ ì¹œêµ¬ë¥¼ ë§Œë“¤ê³ , ë§›ì§‘ì„ ê³µìœ í•˜ê³ , ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ë‚´ì„¸ìš”.</p>
        <div class="banner-buttons" style="display: flex; gap: 0.5rem;">
            <button class="btn btn-primary" th:onclick="'location.href=\'' + @{/team/create} + '\''">ë§›ë‚¨ ëª¨ì„ ë§Œë“¤ê¸°</button><!-- ëª¨ì„ ì°¾ê¸° ë²„íŠ¼ -->
            <button class="btn btn-outline" id="signup-button" th:onclick="'location.href=\'' + @{/user/signup} + '\''">íšŒì›ê°€ì…</button> <!-- íšŒì›ê°€ì… ë²„íŠ¼ -->

        </div>
    </div>
        <img src="/img/index.png" alt="ë©”ì¸ ë°°ë„ˆ ì´ë¯¸ì§€" style="max-width: 60%;">

</section>

<!-- ê²€ìƒ‰ ì„¹ì…˜ -->
<section class="search-section">
    <h2>ì›í•˜ëŠ” ëª¨ì„ì„ ì°¾ì•„ë³´ì„¸ìš”</h2>
    <p>ê´€ì‹¬ ìˆëŠ” ëª¨ì„ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”</p>
    <div class="search-button">
        <button class="btn btn-primary" style="width: 100%;" th:onclick="'location.href=\'' + @{/team/search} + '\''">ëª¨ì„ ê²€ìƒ‰í•˜ê¸°</button> <!-- ëª¨ì„ ê²€ìƒ‰í•˜ê¸° ë²„íŠ¼ -->
    </div>
</section>

<!-- ì¸ê¸° ëª¨ì„ ì„¹ì…˜ -->
<section class="meetings-section">
    <h2>ì¸ê¸° ëª¨ì„</h2>
    <p>ì§€ê¸ˆ ê°€ì¥ ì¸ê¸° ìˆëŠ” ëª¨ì„ì„ í™•ì¸í•´ë³´ì„¸ìš”</p>
    <div class="meetings-grid">
        <div th:each="team : ${topTeams}" class="meeting-card">
            <div class="meeting-image">
                <img th:src="@{${team.imageUrl != null ? team.imageUrl : '/img/food.jpg'}}"
                     alt="ëª¨ì„ ì´ë¯¸ì§€"
                     style="width:100%; height:100%; object-fit:cover;" />
            </div>
            <div class="meeting-details">
                <div class="meeting-title" th:text="${team.teamTitle}"></div>
                <div class="meeting-date"
                     th:text="'ğŸ“… ' + ${#temporals.format(team.teamDate, 'yyyyë…„ MMì›” ddì¼ (E) a hì‹œ')}"></div>
                <p>ğŸ“ <span th:text="${team.restaurantName}"></span></p>
                <p>ğŸ‘¥ <span th:text="${team.nowPeople}"></span>/ <span th:text="${team.maxPeople}"></span>ëª… ì°¸ì—¬ì¤‘</p>
                <div th:text="'â­ï¸' + ${team.favoriteCount} + 'ëª…'"></div>
                <a class="link-button" th:href="@{/team/detail/{teamId}(teamId=${team.teamId})}">ìì„¸íˆ ë³´ê¸°</a>
            </div>
        </div>
    </div>
</section>

<section class="coupon-section">
    <h2>ğŸ« íŠ¹ë³„ í• ì¸ ì¿ í°</h2>
    <p>ì§€ê¸ˆ ë°”ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” ë§›ì§‘ í• ì¸ ì¿ í°ì„ í™•ì¸í•´ë³´ì„¸ìš”!</p>

    <div class="coupon-preview" th:if="${latestCoupons != null and !#lists.isEmpty(latestCoupons)}">
        <div class="coupons-grid">
            <div th:each="coupon : ${latestCoupons}" class="coupon-card">
                <div class="coupon-header">
                    <div class="restaurant-name" th:text="${coupon.restaurant.name}">ì‹ë‹¹ëª…</div>
                    <div class="discount-badge">
                        <span th:text="${coupon.discountValue}">10</span><span th:text="${coupon.discountType.name() == 'PERCENTAGE' ? '%' : 'ì›'}">%</span>
                    </div>
                </div>
                <div class="coupon-body">
                    <div class="coupon-name" th:text="${coupon.name}">ì¿ í°ëª…</div>
                    <div class="coupon-progress">
                        <span th:text="${coupon.issuedQuantity}">50</span>/<span th:text="${coupon.totalQuantity}">100</span> ë°œê¸‰ë¨
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="coupon-actions">
        <button class="btn btn-primary" th:onclick="'location.href=\'' + @{/coupons} + '\''">
            ëª¨ë“  ì¿ í° ë³´ê¸°
        </button>
        <button class="btn btn-outline" th:onclick="'location.href=\'' + @{/user/coupons} + '\''">
            ë‚´ ì¿ í°í•¨
        </button>
    </div>
</section>

<!-- ì½˜í…ì¸  ë­í‚¹ ì„¹ì…˜ -->
<section class="ranking-section" th:if="${contentRanking != null and not #lists.isEmpty(rankingItems)}">
    <h2 th:text="${contentRanking.title}">ğŸ½ï¸ ì†Œê°œíŒ… ë•Œ ë¨¹ìœ¼ë©´ ì•ˆ ë˜ëŠ” ìŒì‹ TOP 5 ğŸ½ï¸</h2>
    <p th:text="${contentRanking.subtitle}">ë§›ë‚¨ì´ ì•Œë ¤ë“œë¦¬ëŠ” ì†Œê°œíŒ… ì„±ê³µë¥ ì„ ë†’ì´ëŠ” ìŒì‹ ì„ íƒ íŒ!</p>
    <div class="ranking-list">
        <!-- ë™ì ìœ¼ë¡œ ë­í‚¹ ì •ë³´ í‘œì‹œ -->
        <div th:each="item : ${rankingItems}" class="ranking-item">
            <div class="ranking-number">
                <span th:text="${item.ranking}"></span>
            </div>
            <div class="ranking-content">
                <div class="item-name" th:text="${item.itemName}"></div>
                <div class="item-description" th:text="${item.description}"></div>
            </div>
        </div>
    </div>
</section>

<!-- ê¸°ëŠ¥ ì†Œê°œ ì„¹ì…˜ -->
<section class="features-section">
    <h2>ë§›ë‚¨ì˜ íŠ¹ë³„í•œ ê¸°ëŠ¥</h2>
    <div class="features-grid">
        <!-- ì²« ë²ˆì§¸ ê¸°ëŠ¥ -->
        <div class="feature">
            <h3>ë§ì¶¤í˜• ì‹œìŠ¤í…œ</h3>
            <p>ì§€ì—­ê³¼ ì‹œê°„ì— ë”°ë¼ ëª¨ì„ì„ ì‰½ê²Œ í•„í„°ë§í•˜ì—¬ ë‚˜ì—ê²Œ ê¼­ ë§ëŠ” ëª¨ì„ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš”.</p>
        </div>

        <!-- ë‘ ë²ˆì§¸ ê¸°ëŠ¥ -->
        <div class="feature">
            <h3>ì‹ ì‚¬ì  ë§¤ì¹­</h3>
            <p>ì·¨í–¥ê³¼ ê´€ì‹¬ì‚¬ë¥¼ ë°˜ì˜í•œ ë§¤ì¹­ìœ¼ë¡œ ì¦ê±°ìš´ ì‚¬ëŒë“¤ê³¼ì˜ ë§Œë‚¨ì„ ë„ì™€ë“œë¦½ë‹ˆë‹¤.</p>
        </div>

        <!-- ì„¸ ë²ˆì§¸ ê¸°ëŠ¥ (ê°„í¸ ì˜ˆì•½ ê¸°ëŠ¥ â†’ ê¸°ëŠ¥ ë³€ê²½) -->
        <div class="feature">
            <h3>ì‹ ë¢° ê¸°ë°˜ ì»¤ë®¤ë‹ˆí‹°</h3>
            <p>ì°¸ì—¬ì í›„ê¸°ì™€ í‰ì ì„ í†µí•´ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ëª¨ì„ë§Œ ê³¨ë¼ ì°¸ì—¬í•  ìˆ˜ ìˆì–´ ì•ˆì‹¬ì´ì—ìš”.</p>
        </div>
    </div>
</section>

<!-- í‘¸í„° -->
<footer>
    Â© 2025 ë§›ë‚¨. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const urlParams = new URLSearchParams(window.location.search);
        const message = urlParams.get('message');

        if (message === 'account_deactivated') {
            const messageBox = document.getElementById('messageBox');
            messageBox.style.display = 'block';

            setTimeout(function() {
                messageBox.style.display = 'none';

                const url = new URL(window.location);
                url.searchParams.delete('message');
                window.history.replaceState({}, document.title, url);
            }, 5000);
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
        const signupButton = document.getElementById("signup-button");
        if (auth.isLoggedIn() && signupButton) {
            signupButton.style.display = "none";
        }
    });
</script>
<script src="/js/header.js"></script>
<script src="/js/notification-common.js"></script>
</body>
</html>